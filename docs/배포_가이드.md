# 테스트케이스 관리 시스템 - 배포 가이드

## 🚀 프로덕션 배포 완료!

### 📦 빌드 정보
- **빌드 위치**: `TestCase/dist/`
- **빌드 크기**:
  - index.html: 0.46 kB
  - CSS: 17.72 kB
  - JS: 667.50 kB
- **최적화**: gzip 압축 적용 (215 kB)

---

## 🔍 현재 실행 중인 서버

### 확인된 포트:
- ✅ **포트 64584**: 테스트케이스 관리 시스템 (현재 실행 중!)
- ❌ 포트 3000: 다른 React 앱
- 포트 5173: 개발 서버

**올바른 접속 주소:**
- 로컬: http://localhost:64584
- 내부망: http://172.31.47.228:64584

---

## 🌐 서버 실행 방법

### **방법 1: 배치 파일 실행 (권장)**

#### 로컬 전용 (내부망)
```bash
# TestCase 폴더에서
./start-production.bat
```
- **접근 주소**: http://localhost:3000

#### 외부 접근 가능 (인터넷)
```bash
# TestCase 폴더에서
./start-production-external.bat
```
- **로컬 접근**: http://localhost:3000
- **외부 접근**: http://172.31.47.228:3000

### **방법 2: npm 스크립트**

```bash
# 로컬 전용
npm run serve

# 외부 접근 가능
npm run serve:external
```

### **방법 3: 직접 명령어**

```bash
# 로컬 전용
cd TestCase
serve -s dist -l 3000

# 외부 접근 가능
serve -s dist -l tcp://0.0.0.0:3000
```

---

## 🔧 외부 접근 설정

### 1. **Windows 방화벽 설정**

#### 방법 A: 자동 설정 (관리자 권한 필요)
```bash
# 관리자 권한으로 CMD 실행 후
netsh advfirewall firewall add rule name="TestCase Server" dir=in action=allow protocol=TCP localport=3000
```

#### 방법 B: GUI 설정
```
1. Windows 검색 → "Windows Defender 방화벽"
2. "고급 설정" 클릭
3. "인바운드 규칙" → "새 규칙"
4. 규칙 유형: 포트
5. 프로토콜: TCP, 포트: 3000
6. 작업: 연결 허용
7. 프로필: 모두 선택
8. 이름: "TestCase Server"
9. "완료" 클릭
```

### 2. **라우터/공유기 포트 포워딩** (선택사항)

외부 인터넷에서 접근하려면:
```
1. 공유기 관리 페이지 접속
2. 포트 포워딩 설정
3. 외부 포트: 3000 → 내부 IP: 172.31.47.228, 포트: 3000
4. 저장
```

### 3. **접근 확인**

#### 로컬 테스트
```
브라우저에서: http://localhost:3000
```

#### 내부망 테스트 (같은 네트워크)
```
브라우저에서: http://172.31.47.228:3000
```

#### 외부 인터넷 테스트
```
1. 공인 IP 확인: https://www.whatismyip.com/
2. 브라우저에서: http://공인IP:3000
```

---

## 🛑 서버 중지 방법

### 터미널에서 실행 중인 경우
```
Ctrl + C 키 입력
```

### 백그라운드로 실행 중인 경우
```bash
# 포트 3000을 사용하는 프로세스 찾기
netstat -ano | findstr :3000

# 프로세스 종료
taskkill /PID <PID번호> /F
```

### 강제 종료
```bash
taskkill /F /IM node.exe
```

---

## 📋 배포 체크리스트

### ✅ 완료된 항목
- [x] 프로덕션 빌드 생성 (`npm run build`)
- [x] serve 패키지 설치
- [x] 서버 시작 스크립트 생성
- [x] 외부 접근용 스크립트 생성
- [x] IP 주소 확인 (172.31.47.228)

### ⚠️ 필요한 작업
- [ ] Windows 방화벽에서 포트 3000 허용
- [ ] 라우터 포트 포워딩 설정 (외부 인터넷 접근 시)
- [ ] 도메인 연결 (선택사항)
- [ ] HTTPS 설정 (선택사항)

---

## 🔐 보안 권장사항

### 1. **기본 인증 추가** (선택사항)
```bash
# 사용자명/비밀번호로 보호
serve -s dist -l 3000 --auth username:password
```

### 2. **HTTPS 설정** (선택사항)
```bash
# SSL 인증서 필요
serve -s dist -l 3000 --ssl-cert cert.pem --ssl-key key.pem
```

### 3. **접근 제한**
- 방화벽에서 특정 IP만 허용
- VPN 연결 필수로 설정
- 인증 시스템 추가

---

## 🌍 외부 접근 주소

### 내부망 (같은 네트워크)
```
http://172.31.47.228:3000
```

### 외부 인터넷 (포트 포워딩 후)
```
http://공인IP:3000
```

---

## 📊 성능 최적화

현재 빌드:
- ✅ Gzip 압축 적용 (667 KB → 215 KB)
- ✅ 코드 압축 (minification)
- ✅ 정적 파일 최적화

추가 최적화 (필요시):
- 코드 스플리팅
- 레이지 로딩
- CDN 사용

---

## 🔄 업데이트 방법

코드 수정 후 재배포:
```bash
cd TestCase

# 1. 빌드
npm run build

# 2. 서버 재시작
./start-production-external.bat
```

---

## 📱 모바일 접근

같은 Wi-Fi에 연결된 모바일에서:
```
브라우저에서: http://172.31.47.228:3000
```

---

## 🆘 문제 해결

### 포트가 이미 사용 중인 경우
```bash
# 다른 포트 사용
serve -s dist -l tcp://0.0.0.0:8080
```

### 외부에서 접근 안 되는 경우
1. 방화벽 규칙 확인
2. 공유기 포트 포워딩 확인
3. Windows Defender 방화벽 확인
4. 안티바이러스 프로그램 확인

### 서버가 멈춘 경우
```bash
# 프로세스 확인
netstat -ano | findstr :3000

# 프로세스 종료 후 재시작
taskkill /PID <PID> /F
./start-production-external.bat
```

---

## 📝 운영 팁

### 1. **자동 시작 설정**
Windows 시작 시 자동 실행:
```
1. Win+R → "shell:startup"
2. start-production-external.bat의 바로가기 복사
```

### 2. **로그 기록**
```bash
serve -s dist -l tcp://0.0.0.0:3000 > server.log 2>&1
```

### 3. **서버 상태 확인**
```bash
# 포트 사용 확인
netstat -ano | findstr :3000
```

---

## 🎉 배포 완료!

이제 다음 명령어로 프로덕션 서버를 실행하세요:

```bash
cd C:\Workspace\MyWork\TestCase
./start-production-external.bat
```

접근 주소:
- **로컬**: http://localhost:3000
- **내부망**: http://172.31.47.228:3000
- **외부**: http://공인IP:3000 (포트 포워딩 필요)
